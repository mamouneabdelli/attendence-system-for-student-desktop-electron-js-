<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Attendance System</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link rel="stylesheet" href="index.css">
    </head>
<body>
  <aside class="sidenav">
    <div class="sidenav-header"><i class="fas fa-graduation-cap"></i> Attendance</div>
    <nav>
      <a class="nav-link active" href="#" onclick="showSection('dashboard')"><i class="fas fa-chart-line"></i>Dashboard</a>
      <a class="nav-link" href="#" onclick="showSection('qr')"><i class="fas fa-qrcode"></i>QR Code</a>
      <a class="nav-link" href="#" onclick="showSection('students')"><i class="fas fa-users"></i>Students</a>
      <a class="nav-link" href="#" onclick="showSection('justifications')" style="position: relative;">
        <i class="fas fa-file-alt"></i>Justifications
        <span class="notification-badge" id="justification-badge" style="display: none;">0</span>
      </a>
      <a class="nav-link" href="#" onclick="showSection('excluded')"><i class="fas fa-user-slash"></i>Excluded</a>
      <div class="section-header">Account</div>
      <a class="nav-link" href="#" onclick="showSection('account')"><i class="fas fa-user"></i>Account Info</a>
      <a class="nav-link" href="#" onclick="showSection('settings')"><i class="fas fa-cog"></i>Settings</a>
    </nav>
  </aside>

  <main class="main-content">
    <div id="dashboard-section" class="content-section">
      <h2>Dashboard</h2>
      <div class="row g-3 mb-3">
        <div class="col-md-3">
          <div class="stat-card">
            <div class="d-flex justify-content-between align-items-center">
              <div><small>Total Students</small><h3 class="mb-0" id="total-students">0</h3></div>
              <i class="fas fa-users fa-2x opacity-50"></i>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="stat-card" style="background: linear-gradient(195deg, #82d616, #5fa913);">
            <div class="d-flex justify-content-between align-items-center">
              <div><small>Present</small><h3 class="mb-0" id="present-today">0</h3></div>
              <i class="fas fa-check-circle fa-2x opacity-50"></i>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="stat-card" style="background: linear-gradient(195deg, #ea0606, #b10505);">
            <div class="d-flex justify-content-between align-items-center">
              <div><small>Absent</small><h3 class="mb-0" id="absent-today">0</h3></div>
              <i class="fas fa-times-circle fa-2x opacity-50"></i>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="stat-card" style="background: linear-gradient(195deg, #17c1e8, #1171ef);">
            <div class="d-flex justify-content-between align-items-center">
              <div><small>Rate</small><h3 class="mb-0" id="attendance-rate">0%</h3></div>
              <i class="fas fa-percentage fa-2x opacity-50"></i>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row g-3 mb-3">
        <div class="col-md-8">
          <div class="card">
            <div class="card-body">
              <h5>Today's Attendance</h5>
              <div id="today-attendance-list"></div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="quick-actions">
            <h5>Quick Actions</h5>
            <button class="quick-action-btn primary" onclick="generateQRCode(); showSection('qr')">
              <i class="fas fa-qrcode"></i> Generate New QR
            </button>
            <button class="quick-action-btn blue" onclick="showSection('students')">
              <i class="fas fa-users"></i> Manage Students
            </button>
            <button class="quick-action-btn outline" onclick="exportData()">
              <i class="fas fa-download"></i> Export Data
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="qr-section" class="content-section" style="display:none;">
      <h2>QR Code</h2>
      <div class="card">
        <div class="card-body text-center">
          <div class="qr-code-container"><div id="qrcode"></div></div>
          <div id="code-timer" class="mb-3 text-muted"></div>
          <button class="generate-btn" onclick="generateQRCode()"><i class="fas fa-sync-alt"></i> Generate New Code</button>
        </div>
      </div>
    </div>

    <div id="students-section" class="content-section" style="display:none;">
      <h2>Student Management</h2>
      <div class="card">
        <div class="card-body">
          <div class="d-flex gap-2 mb-3">
            <input type="text" class="search-box" placeholder="Search..." id="student-search" onkeyup="filterStudents()">
            <button class="generate-btn" onclick="addStudent()"><i class="fas fa-plus"></i> Add</button>
          </div>
          <div id="students-list"></div>
        </div>
      </div>
    </div>

    <div id="justifications-section" class="content-section" style="display:none;">
      <h2>Absence Justifications</h2>
      <div class="card">
        <div class="card-body">
          <div class="mb-3">
            <button class="btn btn-primary btn-sm me-2" onclick="filterJustifications('all')">All</button>
            <button class="btn btn-warning btn-sm me-2" onclick="filterJustifications('pending')">Pending</button>
            <button class="btn btn-success btn-sm me-2" onclick="filterJustifications('approved')">Approved</button>
            <button class="btn btn-danger btn-sm" onclick="filterJustifications('rejected')">Rejected</button>
          </div>
          <div id="justifications-list"></div>
          <p class="text-center text-muted mt-3" id="no-justifications">No justifications yet</p>
        </div>
      </div>
    </div>

    <div id="excluded-section" class="content-section" style="display:none;">
      <h2>Excluded Students</h2>
      <div class="card">
        <div class="card-body">
          <input type="text" class="search-box" placeholder="Search..." id="excluded-search" onkeyup="filterExcluded()">
          <div id="excluded-list"></div>
          <p class="text-center text-muted mt-3" id="no-excluded">No excluded students</p>
        </div>
      </div>
    </div>

    <div id="account-section" class="content-section" style="display:none;">
      <h2>Account Information</h2>
      <div class="card">
        <div class="card-body">
          <div class="d-flex align-items-center mb-3">
            <div class="rounded-circle d-flex align-items-center justify-content-center" style="width: 60px; height: 60px; background: linear-gradient(195deg, var(--primary), #ad0a83); color: white;">
              <i class="fas fa-user fa-2x"></i>
            </div>
            <div class="ms-3">
              <h5 class="mb-0">Teacher Admin</h5>
              <small class="text-muted">teacher@school.edu</small>
            </div>
          </div>
          <hr>
          <div class="mb-2"><small class="text-muted">Role</small><p class="mb-0"><strong>Administrator</strong></p></div>
          <div class="mb-2"><small class="text-muted">Department</small><p class="mb-0"><strong>Computer Science</strong></p></div>
          <div class="mb-2"><small class="text-muted">Member Since</small><p class="mb-0"><strong>September 2024</strong></p></div>
        </div>
      </div>
    </div>

    <div id="settings-section" class="content-section" style="display:none;">
      <h2>Settings</h2>
      <div class="card">
        <div class="card-body">
          <div class="mb-3">
            <label class="form-label">School Name</label>
            <input type="text" class="form-control" id="school-name" value="My School">
          </div>
          <div class="mb-3">
            <label class="form-label">Academic Year</label>
            <input type="text" class="form-control" id="academic-year" value="2024-2025">
          </div>
          <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Justification Modal -->
  <div class="modal-overlay" id="justificationModal" onclick="closeModal(event)">
    <div class="modal-content-custom" onclick="event.stopPropagation()">
      <div class="modal-header-custom">
        <h3>Justification Details</h3>
        <button class="close-modal" onclick="closeModal()">&times;</button>
      </div>
      <div id="modal-body"></div>
    </div>
  </div>

 <script src="index.js"></script>
        </body>
        </html>